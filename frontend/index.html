<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Invoice Manager</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/frontend/styles.css">

</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 d-md-block sidebar collapse bg-dark">
                <div class="logo p-3">
                    <i class="bi bi-pc-display-horizontal"></i>
                    <span>C-DOT Systems</span>
                </div>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#dashboard" data-bs-toggle="tab">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#invoices" data-bs-toggle="tab">
                            <i class="bi bi-receipt"></i> Invoices
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#add-invoice" data-bs-toggle="tab">
                            <i class="bi bi-plus-circle"></i> Add Invoice
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#search" data-bs-toggle="tab">
                            <i class="bi bi-search"></i> Advanced Search
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#reports" data-bs-toggle="tab">
                            <i class="bi bi-graph-up"></i> Reports
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#settings" data-bs-toggle="tab">
                            <i class="bi bi-gear"></i> Settings
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 ms-sm-auto main-content">
                <div class="tab-content">
                    <!-- Dashboard Tab -->
                    <div class="tab-pane fade show active" id="dashboard">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Dashboard</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="btn-group me-2">
                                    <button type="button" class="btn btn-sm btn-outline-secondary">Today</button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary">This Week</button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary">This Month</button>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="card text-white bg-primary dashboard-card">
                                    <div class="card-body">
                                        <div class="card-icon">
                                            <i class="bi bi-receipt"></i>
                                        </div>
                                        <h5 class="card-title">Total Invoices</h5>
                                        <h2 class="card-text" id="total-invoices">1,247</h2>
                                        <p class="card-text">+12% from last month</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card text-white bg-success dashboard-card">
                                    <div class="card-body">
                                        <div class="card-icon">
                                            <i class="bi bi-upc-scan"></i>
                                        </div>
                                        <h5 class="card-title">Items with Serial</h5>
                                        <h2 class="card-text" id="serial-items">856</h2>
                                        <p class="card-text">68.6% of total items</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card text-white bg-warning dashboard-card">
                                    <div class="card-body">
                                        <div class="card-icon">
                                            <i class="bi bi-currency-rupee"></i>
                                        </div>
                                        <h5 class="card-title">Monthly Sales</h5>
                                        <h2 class="card-text" id="monthly-sales">â‚¹2.4M</h2>
                                        <p class="card-text">+8% from last month</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-8">
                                <div class="card dashboard-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Recent Invoices</h5>
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Invoice #</th>
                                                        <th>Date</th>
                                                        <th>Customer</th>
                                                        <th>Amount</th>
                                                        <th>Serials</th>
                                                        <th>Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="recent-invoices">
                                                    <!-- Filled by JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card dashboard-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Quick Actions</h5>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-primary" onclick="showTab('add-invoice')">
                                                <i class="bi bi-plus-circle"></i> Add New Invoice
                                            </button>
                                            <button class="btn btn-success" onclick="showTab('search')">
                                                <i class="bi bi-search"></i> Search Invoices
                                            </button>
                                            <button class="btn btn-info">
                                                <i class="bi bi-printer"></i> Print Report
                                            </button>
                                            <button class="btn btn-secondary">
                                                <i class="bi bi-upload"></i> Import Data
                                            </button>
                                        </div>
                                        <hr>
                                        <h5 class="card-title mt-3">Serial Number Stats</h5>
                                        <div class="progress mb-3">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 68.6%" aria-valuenow="68.6" aria-valuemin="0" aria-valuemax="100"></div>
                                            <div class="progress-bar bg-secondary" role="progressbar" style="width: 31.4%" aria-valuenow="31.4" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                        <div>
                                            <span class="badge bg-success">With Serial (68.6%)</span>
                                            <span class="badge bg-secondary">No Serial (31.4%)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Invoices Tab -->
                    <div class="tab-pane fade" id="invoices">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">All Invoices</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="btn-group me-2">
                                    <button class="btn btn-sm btn-outline-secondary" onclick="exportInvoices()">
                                        <i class="bi bi-download"></i> Export
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary" onclick="printInvoices()">
                                        <i class="bi bi-printer"></i> Print
                                    </button>
                                </div>
                                <div class="dropdown">
                                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="bi bi-funnel"></i> Filter
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <li><a class="dropdown-item" href="#" onclick="filterInvoices('all')">All Invoices</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="filterInvoices('with-serial')">With Serial Numbers</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="filterInvoices('no-serial')">Without Serial Numbers</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item" href="#" onclick="filterInvoices('last-month')">Last 30 Days</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="search-box">
                            <i class="bi bi-search"></i>
                            <input type="text" class="form-control" id="invoice-search" placeholder="Search invoices by number, customer, or serial...">
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Invoice #</th>
                                        <th>Date</th>
                                        <th>Customer</th>
                                        <th>Items</th>
                                        <th>Serials</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="all-invoices">
                                    <!-- Filled by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        <nav aria-label="Invoice pagination">
                            <ul class="pagination justify-content-center">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">Next</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <!-- Add Invoice Tab -->
                    <div class="tab-pane fade" id="add-invoice">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Add New Invoice</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="btn-group me-2">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="clearForm()">
                                        <i class="bi bi-x-circle"></i> Clear
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary" onclick="saveDraft()">
                                        <i class="bi bi-save"></i> Save Draft
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8">
                                <div class="form-section">
                                    <h5><i class="bi bi-file-text"></i> Invoice Details</h5>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="invoice-number" class="form-label">Invoice Number*</label>
                                            <input type="text" class="form-control" id="invoice-number" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="invoice-date" class="form-label">Invoice Date*</label>
                                            <input type="date" class="form-control" id="invoice-date" required>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="invoice-type" class="form-label">Invoice Type*</label>
                                            <select class="form-select" id="invoice-type" required>
                                                <option value="">Select type</option>
                                                <option value="sale">Sales Invoice</option>
                                                <option value="purchase">Purchase Invoice</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="due-date" class="form-label">Due Date</label>
                                            <input type="date" class="form-control" id="due-date">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label for="customer" class="form-label">Customer/Vendor*</label>
                                        <select class="form-select" id="customer" required>
                                            <option value="">Select customer/vendor</option>
                                            <option value="1">C DOT SYSTEMS PVT LTD</option>
                                            <option value="2">ALTAA VISTAA BUSINESS SOLUTIONS PVT LTD</option>
                                            <option value="3">EXFO SALES AND SERVICES INDIA PVT. LTD.</option>
                                            <option value="4">DCC INFOTECH PVT LTD</option>
                                            <option value="5">SNA INFOTECH PVT LTD</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="notes" class="form-label">Notes</label>
                                        <textarea class="form-control" id="notes" rows="2"></textarea>
                                    </div>
                                </div>

                                <div class="form-section">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h5><i class="bi bi-cart"></i> Items</h5>
                                        <button class="btn btn-sm btn-primary" onclick="addItemRow()">
                                            <i class="bi bi-plus"></i> Add Item
                                        </button>
                                    </div>
                                    <div class="table-responsive">
                                        <table class="table" id="items-table">
                                            <thead>
                                                <tr>
                                                    <th>Description</th>
                                                    <th>HSN/SAC</th>
                                                    <th>Qty</th>
                                                    <th>Rate</th>
                                                    <th>Amount</th>
                                                    <th>Serial</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="invoice-items">
                                                <!-- Item rows will be added here -->
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="4" class="text-end"><strong>Subtotal:</strong></td>
                                                    <td id="subtotal">â‚¹0.00</td>
                                                    <td colspan="2"></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" class="text-end"><strong>Tax (18%):</strong></td>
                                                    <td id="tax">â‚¹0.00</td>
                                                    <td colspan="2"></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" class="text-end"><strong>Total:</strong></td>
                                                    <td id="total">â‚¹0.00</td>
                                                    <td colspan="2"></td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                                
                                <!-- PDF Upload Section -->
                                <div class="form-section">
                                    <h5><i class="bi bi-file-earmark-pdf"></i> Upload Invoice PDF</h5>
                                    <div class="pdf-upload-area" id="pdf-upload-area">
                                        <i class="bi bi-cloud-arrow-up"></i>
                                        <h5>Click to upload PDF</h5>
                                        <p class="text-muted">Drag & drop PDF invoice or click to browse</p>
                                        <input type="file" id="pdf-file" accept=".pdf" style="display: none">
                                    </div>
                                    <div class="progress mt-2" id="uploadProgress" style="display: none;">
                                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                             role="progressbar" style="width: 0%"></div>
                                    </div>
                                    <div class="mt-3">
                                        <label class="form-label">Extracted Text</label>
                                        <div class="extracted-text" id="extracted-text">
                                            Text will appear here after upload...
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button class="btn btn-primary" onclick="extractText()">
                                            <i class="bi bi-textarea-t"></i> Extract Text
                                        </button>
                                        <button class="btn btn-outline-secondary" onclick="clearPDF()">
                                            <i class="bi bi-trash"></i> Clear
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-section">
                                    <h5><i class="bi bi-upc-scan"></i> Serial Number Scanner</h5>
                                    <div class="mb-3">
                                        <label class="form-label">Scan Serial Numbers</label>
                                        <div class="input-group">
                                            <input type="text" class="form-control" id="serial-scanner" placeholder="Scan or enter serial numbers">
                                            <button class="btn btn-outline-secondary" type="button" id="scan-button">
                                                <i class="bi bi-upc-scan"></i>
                                            </button>
                                        </div>
                                        <small class="text-muted">Press Enter after each serial number</small>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Scanned Serials</label>
                                        <div class="p-2 border rounded" id="scanned-serials" style="min-height: 100px;">
                                            <!-- Serials will appear here -->
                                        </div>
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="assignSerials()">
                                        <i class="bi bi-link"></i> Assign to Selected Item
                                    </button>
                                </div>

                                <div class="form-section mt-4">
                                    <h5><i class="bi bi-file-earmark-text"></i> Invoice Preview</h5>
                                    <div class="invoice-preview" id="invoice-preview">
                                        <div class="text-center mb-3">
                                            <h4>INVOICE PREVIEW</h4>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <strong>Invoice #:</strong> <span id="preview-invoice-no">-</span><br>
                                                <strong>Date:</strong> <span id="preview-date">-</span>
                                            </div>
                                            <div class="col-6 text-end">
                                                <strong>Type:</strong> <span id="preview-type">-</span><br>
                                                <strong>Due Date:</strong> <span id="preview-due-date">-</span>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="mb-3">
                                            <strong>Customer/Vendor:</strong><br>
                                            <span id="preview-customer">-</span>
                                        </div>
                                        <hr>
                                        <div class="table-responsive">
                                            <table class="table table-sm">
                                                <thead>
                                                    <tr>
                                                        <th>Item</th>
                                                        <th>Qty</th>
                                                        <th>Rate</th>
                                                        <th>Amount</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="preview-items">
                                                    <!-- Preview items will appear here -->
                                                </tbody>
                                            </table>
                                        </div>
                                        <hr>
                                        <div class="text-end">
                                            <strong>Subtotal:</strong> <span id="preview-subtotal">â‚¹0.00</span><br>
                                            <strong>Tax (18%):</strong> <span id="preview-tax">â‚¹0.00</span><br>
                                            <strong>Total:</strong> <span id="preview-total">â‚¹0.00</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="action-buttons mt-4">
                                    <button class="btn btn-success w-100 mb-2" onclick="saveInvoice()">
                                        <i class="bi bi-check-circle"></i> Save Invoice
                                    </button>
                                    <button class="btn btn-outline-secondary w-100" onclick="printInvoice()">
                                        <i class="bi bi-printer"></i> Print & Save
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Search Tab -->
                    <div class="tab-pane fade" id="search">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Advanced Search</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="btn-group me-2">
                                    <button class="btn btn-sm btn-outline-secondary" onclick="clearSearch()">
                                        <i class="bi bi-arrow-counterclockwise"></i> Reset
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="search-invoice-no" class="form-label">Invoice Number</label>
                                    <input type="text" class="form-control" id="search-invoice-no">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="search-customer" class="form-label">Customer/Vendor</label>
                                    <select class="form-select" id="search-customer">
                                        <option value="">All Customers/Vendors</option>
                                        <option value="1">C DOT SYSTEMS PVT LTD</option>
                                        <option value="2">ALTAA VISTAA BUSINESS SOLUTIONS PVT LTD</option>
                                        <option value="3">EXFO SALES AND SERVICES INDIA PVT. LTD.</option>
                                        <option value="4">DCC INFOTECH PVT LTD</option>
                                        <option value="5">SNA INFOTECH PVT LTD</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="search-serial" class="form-label">Serial Number</label>
                                    <input type="text" class="form-control" id="search-serial">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label for="search-date-from" class="form-label">Date From</label>
                                    <input type="date" class="form-control" id="search-date-from">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="search-date-to" class="form-label">Date To</label>
                                    <input type="date" class="form-control" id="search-date-to">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="search-type" class="form-label">Invoice Type</label>
                                    <select class="form-select" id="search-type">
                                        <option value="">All Types</option>
                                        <option value="sale">Sales</option>
                                        <option value="purchase">Purchase</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="search-amount-min" class="form-label">Amount Range</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="search-amount-min" placeholder="Min">
                                        <input type="number" class="form-control" id="search-amount-max" placeholder="Max">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="search-item" class="form-label">Item Description</label>
                                    <input type="text" class="form-control" id="search-item">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="search-hsn" class="form-label">HSN/SAC Code</label>
                                    <input type="text" class="form-control" id="search-hsn">
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="search-serial-type" class="form-label">Serial Number Type</label>
                                    <select class="form-select" id="search-serial-type">
                                        <option value="">All Items</option>
                                        <option value="with">With Serial Numbers</option>
                                        <option value="without">Without Serial Numbers</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="search-text" class="form-label">Search in Extracted Text</label>
                                    <input type="text" class="form-control" id="search-text" placeholder="Search in extracted PDF text...">
                                </div>
                            </div>
                            <div class="text-center">
                                <button class="btn btn-primary" onclick="performSearch()">
                                    <i class="bi bi-search"></i> Search Invoices
                                </button>
                            </div>
                        </div>

                        <div class="mt-4" id="search-results-section" style="display: none;">
                            <h5>Search Results</h5>
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Invoice #</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Items</th>
                                            <th>Serials</th>
                                            <th>Amount</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="search-results">
                                        <!-- Search results will appear here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Reports Tab -->
                    <div class="tab-pane fade" id="reports">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Reports</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="btn-group me-2">
                                    <button class="btn btn-sm btn-outline-secondary" onclick="generateReport('sales')">
                                        <i class="bi bi-file-earmark-bar-graph"></i> Sales Report
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary" onclick="generateReport('serials')">
                                        <i class="bi bi-upc-scan"></i> Serial Report
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card dashboard-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Sales by Month</h5>
                                        <canvas id="salesChart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card dashboard-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Serial Number Distribution</h5>
                                        <canvas id="serialChart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-12">
                                <div class="card dashboard-card">
                                    <div class="card-body">
                                        <h5 class="card-title">Top Customers</h5>
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Customer</th>
                                                        <th>Invoices</th>
                                                        <th>Total Amount</th>
                                                        <th>Avg. Invoice</th>
                                                        <th>Last Purchase</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="top-customers">
                                                    <!-- Filled by JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div class="tab-pane fade" id="settings">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2">Settings</h1>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-section">
                                    <h5><i class="bi bi-gear"></i> System Settings</h5>
                                    <div class="mb-3">
                                        <label for="company-name" class="form-label">Company Name</label>
                                        <input type="text" class="form-control" id="company-name" value="C-DOT Systems">
                                    </div>
                                    <div class="mb-3">
                                        <label for="default-tax" class="form-label">Default Tax Rate (%)</label>
                                        <input type="number" class="form-control" id="default-tax" value="18">
                                    </div>
                                    <div class="mb-3">
                                        <label for="invoice-prefix" class="form-label">Invoice Number Prefix</label>
                                        <input type="text" class="form-control" id="invoice-prefix" value="INV">
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="auto-serial" checked>
                                        <label class="form-check-label" for="auto-serial">Auto-detect serial number items</label>
                                    </div>
                                    <div class="mb-3 form-check">
                                        <input type="checkbox" class="form-check-input" id="auto-extract" checked>
                                        <label class="form-check-label" for="auto-extract">Auto-extract from PDF upload</label>
                                    </div>
                                    <button class="btn btn-primary" onclick="saveSettings()">
                                        <i class="bi bi-save"></i> Save Settings
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-section">
                                    <h5><i class="bi bi-people"></i> User Management</h5>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Username</th>
                                                    <th>Role</th>
                                                    <th>Last Login</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>admin@C-DOT.com</td>
                                                    <td>Administrator</td>
                                                    <td>Today, 10:45 AM</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-pencil"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>user1@C-DOT.com</td>
                                                    <td>Standard User</td>
                                                    <td>Yesterday, 3:22 PM</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-pencil"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <button class="btn btn-success mt-2" onclick="addUser()">
                                        <i class="bi bi-plus"></i> Add User
                                    </button>
                                </div>

                                <div class="form-section mt-4">
                                    <h5><i class="bi bi-database"></i> Data Management</h5>
                                    <div class="d-grid gap-2">
                                        <button class="btn btn-outline-secondary" onclick="backupData()">
                                            <i class="bi bi-download"></i> Backup Data
                                        </button>
                                        <button class="btn btn-outline-secondary" onclick="restoreData()">
                                            <i class="bi bi-upload"></i> Restore Data
                                        </button>
                                        <button class="btn btn-outline-danger" onclick="clearData()">
                                            <i class="bi bi-trash"></i> Clear All Data
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Invoice Details -->
    <div class="modal fade" id="invoiceModal" tabindex="-1" aria-labelledby="invoiceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="invoiceModalLabel">Invoice Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="invoice-modal-body">
                    <!-- Invoice details will be loaded here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="printSelectedInvoice()">
                        <i class="bi bi-printer"></i> Print
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Add User -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">Add New User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="new-username" class="form-label">Email</label>
                        <input type="email" class="form-control" id="new-username">
                    </div>
                    <div class="mb-3">
                        <label for="new-password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="new-password">
                    </div>
                    <div class="mb-3">
                        <label for="user-role" class="form-label">Role</label>
                        <select class="form-select" id="user-role">
                            <option value="user">Standard User</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveUser()">Save User</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PDF Viewer Modal -->
    <div class="modal fade" id="pdfViewerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pdfModalTitle">PDF Viewer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="ratio ratio-1x1">
                        <iframe id="pdfViewer" src="" style="width: 100%; height: 100%; border: none;"></iframe>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">
                        <i class="bi bi-download"></i> Download
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/invoices.js"></script>
    <script src="js/search.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>